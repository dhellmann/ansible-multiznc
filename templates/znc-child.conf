// WARNING
//
// Do NOT edit this file while ZNC is running!
// Use webadmin or *controlpanel instead.
//
// Altering this file by hand will forfeit all support.
//
// But if you feel risky, you might want to read help on /znc saveconfig and /znc rehash.
// Also check http://en.znc.in/wiki/Configuration

AnonIPLimit = 10
ConnectDelay = 5
MaxBufferSize = {{znc_max_buffer_size}}
ProtectWebSessions = true
{% if item.get('use_ssl', True) %}
SSLCertFile = {{znc_config_dir}}/{{item.name}}/znc.pem
{% endif %}
ServerThrottle = 30
Version = 1.6
HideVersion = false
PidFile = {{znc_config_dir}}/{{item.name}}/znc.pid
{% if item.get('ssl_protocols') %}
SSLProtocols = {{item['ssl_protocols']}}
{% endif %}

<Listener listener0>
    AllowIRC = true
    AllowWeb = true
{% if item.get('ipv4', True) %}
    IPv4 = true
{% endif %}
{% if item.get('ipv6', False) %}
    IPv6 = true
{% endif %}
    Port = {{item.port}}
    SSL = {{item.get('use_ssl', 'true')}}
{% if item.get('host', False) %}
    Host = {{ item.host }}
{% endif %}
</Listener>

<User {{znc_user.name}}>
    Admin = true
    AltNick = {{znc_alt_nick}}
    AppendTimestamp = false
    AutoClearChanBuffer = {{item.auto_clear_chan_buffer | default(znc_auto_clear_chan_buffer)}}
    Buffer = {{item.buffer | default(znc_buffer)}}
    ChanModes = +stn
    DenyLoadMod = false
    DenySetBindHost = false
    JoinTries = 10
    LoadModule = chansaver
    LoadModule = controlpanel
    LoadModule = perform
    MaxJoins = 0
    MaxNetworks = 1
    MultiClients = true
    Nick = {{znc_nick}}
    PrependTimestamp = true
    QuitMsg = {{znc_quit_msg}}
    RealName = {{znc_real_name}}
    StatusPrefix = *
    TimestampFormat = [%H:%M:%S]

{% for net in znc_networks %}
    <Network {{net.name}}>
        FloodBurst = 4
        FloodRate = 1.00
        IRCConnectEnabled = true
        LoadModule = chansaver
        LoadModule = keepnick
        LoadModule = kickrejoin
        LoadModule = nickserv
        LoadModule = perform
        // Combine the ZNC username and the network name to ensure the
        // connection is for the specific network.
		// http://wiki.znc.in/Connecting_to_ZNC
        Ident = {{znc_user.name}}/{{net.name}}
        Server = 127.0.0.1 +{{znc_base_port}} {{znc_user.password}}
		// We generated this SSL certificate ourselves, so set the
		// flag to trust it.
        TrustedServerFingerprint = {{znc_base_ssl_fingerprint.stdout}}

{% for c in net.channels %}
        <Chan {{c}}>
        </Chan>
{% endfor %}
    </Network>

{% endfor %}

    <Pass password>
        Hash = {{znc_user.hash}}
        Method = {{znc_user.method | default('SHA256')}}
        Salt = {{znc_user.salt}}
    </Pass>
</User>
